{"version":3,"sources":["../src/services/mailer-service.ts"],"names":[],"mappings":";;AACA,IAAI,UAAU,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAGvC;IAEI,gBAAsB,CAAC;IAEhB,SAAS,CAAC,GAAO,EAAE,cAAc;QACpC,6BAA6B;QAC7B,IAAI,WAAW,GAAG,UAAU,CAAC,eAAe,CAAC;YACzC,OAAO,EAAE,OAAO;YAChB,IAAI,EAAE;gBACF,IAAI,EAAE,8BAA8B;gBACpC,IAAI,EAAE,cAAc,CAAC,gBAAgB;aACxC;SACJ,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,QAAQ,GAAG,cAAc,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,cAAc,CAAC,IAAI,CAAC,QAAQ,GAAG,OAAO,GAAG,iEAAiE,GAAG,cAAc,CAAC,SAAS,GAAG,4DAA4D,GAAG,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,GAAG,uCAAuC,CAAC;QACrV,IAAI,WAAW,GAAG;YACd,IAAI,EAAE,8BAA8B;YACpC,EAAE,EAAE,cAAc,CAAC,IAAI,CAAC,SAAS;YACjC,OAAO,EAAE,uBAAuB;YAChC,IAAI,EAAE,IAAI,CAAC,qBAAqB;YAChC,8EAA8E;SACjF,CAAC;QAEF,WAAW,CAAC,QAAQ,CAAC,WAAW,EAAE,UAAS,KAAK,EAAE,IAAI;YAClD,EAAE,CAAA,CAAC,KAAK,CAAC,CAAA,CAAC;gBACN,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBACnB,GAAG,CAAC,IAAI,CAAC,EAAC,EAAE,EAAE,OAAO,EAAC,CAAC,CAAC;YAC5B,CAAC;YAAA,IAAI,CAAA,CAAC;gBACF,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC9C,GAAG,CAAC,IAAI,CAAC,EAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAC,CAAC,CAAC;YAClC,CAAC;YAAA,CAAC;QACN,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AAhCD,sCAgCC;AACD,MAAM,CAAC,OAAO,GAAG,IAAI,aAAa,EAAE,CAAC","file":"mailer-service.js","sourcesContent":["import {Router, Request, Response, NextFunction} from 'express';\r\nvar nodemailer = require('nodemailer');\r\n\r\n\r\nexport class MailerService {\r\n\r\n    public constructor() {}\r\n\r\n    public sendEmail(res:any, requestDetails) : any {\r\n        // Not the movie transporter!\r\n        var transporter = nodemailer.createTransport({\r\n            service: 'Gmail',\r\n            auth: {\r\n                user: 'fieldbookingsystem@gmail.com', // Your email id\r\n                pass: 'startbooking' // Your password\r\n            }\r\n        });\r\n        var text = 'Hello ' + requestDetails.user.firstName + ' ' + requestDetails.user.lastName + ',\\n\\n' + 'Your field booking request has been submitted with Request ID: ' + requestDetails.requestId + '. You will receive an email within the next 48 hours from ' + requestDetails.field.admin.organization + ' for payment arrangements. Thank you!';\r\n        var mailOptions = {\r\n            from: 'fieldbookingsystem@gmail.com', // sender address\r\n            to: requestDetails.user.userEmail, // list of receivers\r\n            subject: 'Field Booking Request', // Subject line\r\n            text: text //, // plaintext body\r\n            // html: '<b>Hello world âœ”</b>' // You can choose to send an HTML body instead\r\n        };\r\n\r\n        transporter.sendMail(mailOptions, function(error, info){\r\n            if(error){\r\n                console.log(error);\r\n                res.json({yo: 'error'});\r\n            }else{\r\n                console.log('Message sent: ' + info.response);\r\n                res.json({yo: info.response});\r\n            };\r\n        });\r\n    }\r\n}\r\nmodule.exports = new MailerService();"],"sourceRoot":".."}